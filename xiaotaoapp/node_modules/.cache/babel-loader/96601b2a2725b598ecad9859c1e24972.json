{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _class, _temp;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _nextIcon = require('../../../next-icon/lib/index.js');\n\nvar _nextIcon2 = _interopRequireDefault(_nextIcon);\n\nvar _nextProgress = require('../../../next-progress/lib/index.js');\n\nvar _nextProgress2 = _interopRequireDefault(_nextProgress);\n\nvar _nextUtil = require('../../../next-util/lib/index.js');\n\nvar _nextDom = require('../../../next-dom/lib/index.js');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass);\n}\n/** Step.Item */\n\n\nvar StepItem = (_temp = _class = function (_Component) {\n  _inherits(StepItem, _Component);\n\n  function StepItem(props) {\n    _classCallCheck(this, StepItem);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.removeClickedCls = _this.removeClickedCls.bind(_this);\n    _this.onClick = _this.onClick.bind(_this);\n    _this._nodeRefHandler = _this._nodeRefHandler.bind(_this);\n    return _this;\n  }\n\n  StepItem.prototype.getNode = function getNode() {\n    var _props = this.props,\n        prefix = _props.prefix,\n        index = _props.index,\n        status = _props.status,\n        icon = _props.icon,\n        type = _props.type,\n        percent = _props.percent;\n    var nodeElement = icon;\n\n    if (type === 'dot') {\n      nodeElement = icon ? _react2['default'].createElement(_nextIcon2['default'], {\n        type: icon\n      }) : _react2['default'].createElement('span', {\n        className: prefix + 'step-item-node-dot'\n      });\n    } else if (type === 'circle' && percent) {\n      nodeElement = _react2['default'].createElement(_nextProgress2['default'], {\n        shape: 'circle',\n        percent: percent,\n        className: prefix + 'step-item-progress'\n      });\n    } else {\n      nodeElement = _react2['default'].createElement('div', {\n        className: prefix + 'step-item-node-circle'\n      }, icon ? _react2['default'].createElement(_nextIcon2['default'], {\n        type: icon\n      }) : this._itemRender(index, status));\n    }\n\n    return nodeElement;\n  };\n\n  StepItem.prototype.getStyle = function getStyle() {\n    var _props2 = this.props,\n        parentWidth = _props2.parentWidth,\n        parentHeight = _props2.parentHeight,\n        direction = _props2.direction,\n        total = _props2.total,\n        type = _props2.type;\n    var width = 'auto';\n\n    if (!_nextUtil.support.flex && Number(parentWidth) && Number(parentHeight)) {\n      if (type === 'arrow') {\n        width = Math.floor(parentWidth / total - parentHeight / 2 - parentHeight / 8);\n      } else {\n        width = direction === 'horizontal' ? Math.floor(parentWidth / total) : 'auto';\n      }\n    }\n\n    return {\n      width: width\n    };\n  };\n\n  StepItem.prototype.onClick = function onClick() {\n    var _props3 = this.props,\n        index = _props3.index,\n        disabled = _props3.disabled,\n        readOnly = _props3.readOnly,\n        animation = _props3.animation;\n\n    if (disabled || readOnly) {\n      return false;\n    }\n\n    if (animation && this.stepNode) {\n      _nextDom.classList.hasClass(this.stepNode, 'clicked') ? _nextDom.classList.removeClass(this.stepNode, 'clicked') : _nextDom.classList.addClass(this.stepNode, 'clicked');\n    }\n\n    this.props.onClick(index);\n  };\n\n  StepItem.prototype.removeClickedCls = function removeClickedCls() {\n    var _props4 = this.props,\n        animation = _props4.animation,\n        prefix = _props4.prefix;\n\n    if (animation && this.stepNode && _nextDom.classList.hasClass(this.stepNode, 'clicked')) {\n      _nextDom.classList.removeClass(this.stepNode, 'clicked');\n    }\n  }; // 节点的渲染方法\n\n\n  StepItem.prototype._itemRender = function _itemRender(index, status) {\n    var itemRender = this.props.itemRender;\n\n    if (itemRender) {\n      return itemRender(index, status);\n    }\n\n    return status === 'finish' ? _react2['default'].createElement(_nextIcon2['default'], {\n      type: 'select'\n    }) : index + 1;\n  };\n\n  StepItem.prototype._nodeRefHandler = function _nodeRefHandler(ref) {\n    this.stepNode = ref;\n  };\n\n  StepItem.prototype.render = function render() {\n    var _classNames;\n\n    var _props5 = this.props,\n        prefix = _props5.prefix,\n        className = _props5.className,\n        status = _props5.status,\n        title = _props5.title,\n        index = _props5.index,\n        total = _props5.total,\n        type = _props5.type,\n        content = _props5.content,\n        direction = _props5.direction,\n        disabled = _props5.disabled,\n        onClick = _props5.onClick,\n        readOnly = _props5.readOnly,\n        animation = _props5.animation,\n        others = _objectWithoutProperties(_props5, ['prefix', 'className', 'status', 'title', 'index', 'total', 'type', 'content', 'direction', 'disabled', 'onClick', 'readOnly', 'animation']);\n\n    var nodeElement = this.getNode();\n    var pickProps = (0, _nextUtil.pickAttrs)(others);\n    var stepCls = (0, _classnames2['default'])((_classNames = {}, _defineProperty(_classNames, prefix + 'step-item', true), _defineProperty(_classNames, prefix + 'step-item-' + status, status), _defineProperty(_classNames, prefix + 'step-item-first', index === 0), _defineProperty(_classNames, prefix + 'step-item-last', index === total - 1), _defineProperty(_classNames, prefix + 'step-item-disabled', disabled), _defineProperty(_classNames, prefix + 'step-item-read-only', readOnly), _defineProperty(_classNames, className, className), _classNames));\n    var nodeCls = (0, _classnames2['default'])(_defineProperty({}, prefix + 'step-item-node', true));\n    var overlayCls = status === 'finish' ? {\n      width: '100%'\n    } : null;\n\n    var arrowElement = _react2['default'].createElement('div', _extends({}, pickProps, {\n      style: this.getStyle(),\n      className: stepCls,\n      onClick: this.onClick\n    }), _react2['default'].createElement('div', {\n      className: prefix + 'step-item-container'\n    }, _react2['default'].createElement('div', {\n      className: prefix + 'step-item-title'\n    }, title)));\n\n    var otherElement = _react2['default'].createElement('div', _extends({}, pickProps, {\n      style: this.getStyle(),\n      className: stepCls\n    }), _react2['default'].createElement('div', {\n      className: prefix + 'step-item-tail'\n    }, _react2['default'].createElement('div', {\n      className: prefix + 'step-item-tail-underlay'\n    }, _react2['default'].createElement('div', {\n      className: prefix + 'step-item-tail-overlay',\n      style: overlayCls\n    }))), direction === 'vertical' ? _react2['default'].createElement('div', {\n      className: prefix + 'step-item-container'\n    }, _react2['default'].createElement('div', {\n      className: prefix + 'step-item-node-placeholder',\n      onClick: this.onClick\n    }, _react2['default'].createElement('div', {\n      className: prefix + 'step-item-node',\n      ref: this._nodeRefHandler,\n      onTransitionEnd: this.removeClickedCls\n    }, nodeElement)), _react2['default'].createElement('div', {\n      className: prefix + 'step-item-body'\n    }, _react2['default'].createElement('div', {\n      className: prefix + 'step-item-title'\n    }, title), _react2['default'].createElement('div', {\n      className: prefix + 'step-item-content'\n    }, content))) : _react2['default'].createElement('div', {\n      className: prefix + 'step-item-container'\n    }, _react2['default'].createElement('div', {\n      className: prefix + 'step-item-node',\n      onClick: this.onClick,\n      ref: this._nodeRefHandler,\n      onTransitionEnd: this.removeClickedCls\n    }, nodeElement), _react2['default'].createElement('div', {\n      className: prefix + 'step-item-title'\n    }, title)));\n\n    return type === 'arrow' ? arrowElement : otherElement;\n  };\n\n  return StepItem;\n}(_react.Component), _class.propTypes = {\n  /**\n   * 组件的样式品牌前缀\n   */\n  prefix: _propTypes2['default'].string,\n\n  /**\n   * 步骤的状态，如不传，会根据外层的 Step 的 current 属性生成，可选值为 `wait`, `process`, `finish`\n   */\n  status: _propTypes2['default'].oneOf(['wait', 'process', 'finish']),\n\n  /**\n   * 标题\n   */\n  title: _propTypes2['default'].node,\n  direction: _propTypes2['default'].oneOf(['horizontal', 'vertical']),\n  type: _propTypes2['default'].oneOf(['circle', 'arrow', 'dot']),\n\n  /**\n   * 图标\n   */\n  icon: _propTypes2['default'].string,\n\n  /**\n   * 内容，用于垂直状态下的内容填充\n   */\n  content: _propTypes2['default'].node,\n\n  /**\n   * StepItem 的自定义渲染\n   * @param {Number} index   节点索引\n   * @param {String} status  节点状态\n   * @returns {Node} 节点的渲染结果\n   */\n  itemRender: _propTypes2['default'].func,\n\n  /**\n   * 百分比\n   */\n  percent: _propTypes2['default'].number,\n  index: _propTypes2['default'].number,\n  total: _propTypes2['default'].number,\n  animation: _propTypes2['default'].bool,\n  // 是否开启动效，由父级传入\n\n  /**\n   * 是否禁用\n   */\n  disabled: _propTypes2['default'].bool,\n  parentWidth: _propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].number]),\n  parentHeight: _propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].number]),\n\n  /**\n   * 点击步骤时的回调\n   * @param {Number} index 节点索引\n   */\n  onClick: _propTypes2['default'].func,\n\n  /**\n   * 自定义样式\n   */\n  className: _propTypes2['default'].string\n}, _class.defaultProps = {\n  direction: 'horizontal',\n  type: 'circle',\n  index: 0,\n  total: 1,\n  onClick: function onClick() {}\n}, _temp);\nStepItem.displayName = 'StepItem';\nexports['default'] = StepItem;\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}