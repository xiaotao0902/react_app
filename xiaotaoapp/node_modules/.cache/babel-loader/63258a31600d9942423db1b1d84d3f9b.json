{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _class, _temp;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _nextProgress = require('../../next-progress/lib/index.js');\n\nvar _nextProgress2 = _interopRequireDefault(_nextProgress);\n\nvar _nextIcon = require('../../next-icon/lib/index.js');\n\nvar _nextIcon2 = _interopRequireDefault(_nextIcon);\n\nvar _nextLocaleProvider = require('../../next-locale-provider/lib/index.js');\n\nvar _nextLocaleProvider2 = _interopRequireDefault(_nextLocaleProvider);\n\nvar _index = require('./util/index.js');\n\nvar util = _interopRequireWildcard(_index);\n\nvar _util = require('./util/index.js');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass);\n}\n\nvar noop = function noop() {};\n/** Upload.List */\n\n\nvar UploadList = (_temp = _class = function (_Component) {\n  _inherits(UploadList, _Component);\n\n  function UploadList() {\n    _classCallCheck(this, UploadList);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  UploadList.prototype.componentDidUpdate = function componentDidUpdate() {\n    var _this2 = this;\n\n    if (this.props.listType !== 'picture' && this.props.listType !== 'picture-card') {\n      return;\n    }\n\n    this.props.fileList.forEach(function (file) {\n      if (typeof document === 'undefined' || typeof window === 'undefined' || !window.FileReader || !window.File || !(file.originFileObj instanceof File) || file.thumbUrl !== undefined) {\n        return;\n      }\n\n      file.thumbUrl = '';\n      util.readFileAsDataURL(file.originFileObj, function (previewDataUrl) {\n        file.thumbUrl = previewDataUrl;\n\n        _this2.forceUpdate();\n      });\n    });\n  };\n\n  UploadList.prototype.handleClose = function handleClose(file) {\n    this.props.onRemove(file);\n  };\n\n  UploadList.prototype.handleCancel = function handleCancel(file) {\n    this.props.onCancel(file);\n  };\n\n  UploadList.prototype.render = function render() {\n    var _this3 = this,\n        _classNames2;\n\n    var _props = this.props,\n        listType = _props.listType,\n        locale = _props.locale,\n        children = _props.children;\n    var prefix = this.context.prefix || this.props.prefix;\n    var prefixCls = prefix + 'upload';\n    var list = this.props.fileList.map(function (file, idx) {\n      var _classNames;\n\n      var size = file.size ? parseFloat(file.size / 1024, 10).toFixed(2) : 0;\n      var progress = void 0;\n      var img = '';\n      file.uid = file.uid || (0, _util.uid)();\n      var status = file.status;\n\n      if (listType === 'picture-card') {\n        if (status === 'uploading') {\n          img = _react2['default'].createElement('div', {\n            className: prefixCls + '-list-item-thumbnail'\n          }, _react2['default'].createElement('div', null, _react2['default'].createElement(_nextIcon2['default'], {\n            type: 'picture'\n          }), _react2['default'].createElement('a', {\n            href: 'javascript:;',\n            onClick: function onClick() {\n              return _this3.handleCancel(file);\n            }\n          }, locale.image.cancel)));\n        } else if (status === 'error') {\n          img = _react2['default'].createElement('div', {\n            className: prefixCls + '-list-item-thumbnail'\n          }, _react2['default'].createElement('div', null, _react2['default'].createElement(_nextIcon2['default'], {\n            type: 'cry'\n          })));\n        } else {\n          var backgroundSize = file.response && file.response.height > file.response.width ? 'auto 100%' : '100% auto';\n          img = _react2['default'].createElement('div', {\n            className: prefixCls + '-list-item-thumbnail'\n          }, _react2['default'].createElement('div', {\n            style: {\n              backgroundImage: 'url(\"' + file.imgURL + '\")',\n              backgroundSize: backgroundSize\n            }\n          }));\n        }\n      } else if (listType === 'text-image') {\n        if (status === 'uploading') {\n          img = _react2['default'].createElement('div', {\n            className: prefixCls + '-list-item-thumbnail'\n          }, _react2['default'].createElement(_nextIcon2['default'], {\n            type: 'picture'\n          }));\n        } else if (status === 'error') {\n          img = _react2['default'].createElement('div', {\n            className: prefixCls + '-list-item-thumbnail'\n          }, _react2['default'].createElement(_nextIcon2['default'], {\n            type: 'cry'\n          }));\n        } else {\n          var _backgroundSize = file.response && file.response.height > file.response.width ? 'auto 100%' : '100% auto';\n\n          img = _react2['default'].createElement('div', {\n            className: prefixCls + '-list-item-thumbnail'\n          }, _react2['default'].createElement('div', {\n            style: {\n              backgroundImage: 'url(' + file.imgURL + ')',\n              backgroundSize: _backgroundSize\n            }\n          }));\n        }\n      }\n\n      if (file.status === 'uploading') {\n        progress = _react2['default'].createElement('div', {\n          className: prefixCls + '-list-item-progress'\n        }, _react2['default'].createElement(_nextProgress2['default'], {\n          size: listType === 'picture-card' ? 'small' : 'medium',\n          percent: file.percent,\n          showInfo: false\n        }));\n      }\n\n      var infoUploadingClass = (0, _classnames2['default'])((_classNames = {}, _defineProperty(_classNames, prefixCls + '-list-item', true), _defineProperty(_classNames, prefixCls + '-list-item-' + file.status, true), _defineProperty(_classNames, prefixCls + '-list-item-hovered', !!file.hovered), _classNames));\n      return _react2['default'].createElement('div', {\n        className: infoUploadingClass,\n        key: file.uid\n      }, _this3.props.cell ? _this3.props.cell(file, idx) : _react2['default'].createElement('div', {\n        className: prefixCls + '-list-item-info'\n      }, img, listType === 'picture-card' ? _react2['default'].createElement('span', {\n        className: prefixCls + '-list-item-name'\n      }, file.fileName) : listType === 'text-image' && file.status === 'uploading' ? '' : _react2['default'].createElement('a', {\n        href: file.downloadURL,\n        target: '_blank',\n        style: {\n          pointerEvents: file.downloadURL ? '' : 'none'\n        },\n        className: prefixCls + '-list-item-name'\n      }, _react2['default'].createElement('span', null, file.fileName), !!size && _react2['default'].createElement('span', {\n        className: prefixCls + '-list-item-extra'\n      }, '(', size, 'K)')), progress, listType === 'picture-card' ? file.status !== 'uploading' ? _react2['default'].createElement('span', {\n        className: prefixCls + '-tool ' + (!_this3.props.closable ? 'noclose' : '')\n      }, _react2['default'].createElement('a', {\n        href: file.downloadURL,\n        target: '_blank',\n        style: {\n          pointerEvents: file.downloadURL ? '' : 'none'\n        }\n      }, _react2['default'].createElement(_nextIcon2['default'], {\n        type: file.downloadURL ? 'download' : '',\n        className: prefixCls + '-tool-download-icon'\n      })), _this3.props.closable ? _react2['default'].createElement('span', {\n        className: prefixCls + '-tool-close'\n      }, _react2['default'].createElement(_nextIcon2['default'], {\n        type: 'ashbin',\n        onClick: function onClick() {\n          return _this3.handleClose(file);\n        }\n      })) : null) : '' : _this3.props.closable ? _react2['default'].createElement(_nextIcon2['default'], {\n        type: 'close',\n        size: 'large',\n        onClick: function onClick() {\n          return _this3.handleClose(file);\n        }\n      }) : null));\n    });\n    var listClassNames = (0, _classnames2['default'])((_classNames2 = {}, _defineProperty(_classNames2, prefixCls + '-list', true), _defineProperty(_classNames2, prefixCls + '-list-' + this.props.listType, true), _classNames2));\n    return _react2['default'].createElement('div', {\n      className: listClassNames\n    }, list, children);\n  };\n\n  return UploadList;\n}(_react.Component), _class.propTypes = {\n  prefix: _propTypes2['default'].string,\n  locale: _propTypes2['default'].object,\n\n  /**\n   * 文件列表，数据格式请参考 文件对象\n   */\n  listType: _propTypes2['default'].oneOf(['text', 'text-image', 'picture-card']),\n\n  /**\n   * 文件列表\n   */\n  fileList: _propTypes2['default'].array,\n  closable: _propTypes2['default'].bool,\n  language: _propTypes2['default'].string,\n\n  /**\n   * 渲染\n   * @param {Object} value 该行数据\n   * @param {Number} idx   序列\n   * @return {Element} 自定义内容\n   */\n  cell: _propTypes2['default'].func,\n  onRemove: _propTypes2['default'].func,\n  onCancel: _propTypes2['default'].func,\n  children: _propTypes2['default'].node\n}, _class.defaultProps = {\n  prefix: 'next-',\n  listType: 'text',\n  fileList: [],\n  closable: false,\n  onRemove: noop,\n  onCancel: noop\n}, _class.contextTypes = {\n  prefix: _propTypes2['default'].string\n}, _temp);\nUploadList.displayName = 'UploadList';\nexports['default'] = (0, _nextLocaleProvider2['default'])(UploadList);\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}