{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _cropperjs = require('cropperjs');\n\nvar _cropperjs2 = _interopRequireDefault(_cropperjs);\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _nextUtil = require('../../../next-util/lib/index.js');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass);\n}\n/* eslint-disable */\n\n/**\n * Fork from https://github.com/roadmanfong/react-cropper\n */\n\n\nvar optionProps = ['dragMode', 'aspectRatio', 'data', 'minCropBoxWidth', 'minCropBoxHeight', // unchangeable props start from here\n'viewMode', 'preview', 'responsive', 'restore', 'checkCrossOrigin', 'checkOrientation', 'modal', 'guides', 'center', 'highlight', 'background', 'autoCrop', 'autoCropArea', 'movable', 'rotatable', 'scalable', 'zoomable', 'zoomOnTouch', 'zoomOnWheel', 'wheelZoomRation', 'cropBoxMovable', 'cropBoxResizable', 'toggleDragModeOnDblclick', 'minContainerWidth', 'minContainerHeight', 'minCanvasWidth', 'minCanvasHeight', 'build', 'built', 'cropstart', 'cropmove', 'cropend', 'crop', 'zoom'];\nvar unchangeableProps = optionProps.slice(3);\n\nvar ReactCropper = function (_Component) {\n  _inherits(ReactCropper, _Component);\n\n  function ReactCropper() {\n    _classCallCheck(this, ReactCropper);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  ReactCropper.prototype.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    var options = Object.keys(this.props).filter(function (propKey) {\n      return optionProps.indexOf(propKey) !== -1;\n    }).reduce(function (prevOptions, propKey) {\n      return (0, _objectAssign2['default'])({}, prevOptions, _defineProperty({}, propKey, _this2.props[propKey]));\n    }, {});\n    this.img = _reactDom2['default'].findDOMNode(this.refs.img);\n    this.cropper = new _cropperjs2['default'](this.img, options);\n  };\n\n  ReactCropper.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (nextProps.src !== this.props.src) {\n      this.cropper.reset().clear().replace(nextProps.src);\n    }\n\n    if (nextProps.aspectRatio !== this.props.aspectRatio) {\n      this.setAspectRatio(nextProps.aspectRatio);\n    }\n\n    if (nextProps.data !== this.props.data) {\n      this.setData(nextProps.data);\n    }\n\n    if (nextProps.dragMode !== this.props.dragMode) {\n      this.setDragMode(nextProps.dragMode);\n    }\n\n    if (nextProps.cropBoxData !== this.props.cropBoxData) {\n      this.setCropBoxData(nextProps.cropBoxData);\n    }\n\n    if (nextProps.canvasData !== this.props.canvasData) {\n      this.setCanvasData(nextProps.canvasData);\n    }\n\n    if (nextProps.moveTo !== this.props.moveTo) {\n      if (nextProps.moveTo.length > 1) {\n        this.moveTo(nextProps.moveTo[0], nextProps.moveTo[1]);\n      } else {\n        this.moveTo(nextProps.moveTo[0]);\n      }\n    }\n\n    if (nextProps.zoomTo !== this.props.zoomTo) {\n      this.zoomTo(nextProps.zoomTo);\n    }\n\n    if (nextProps.rotateTo !== this.props.rotateTo) {\n      this.rotateTo(nextProps.rotateTo);\n    }\n\n    if (nextProps.scaleX !== this.props.scaleX) {\n      this.scaleX(nextProps.scaleX);\n    }\n\n    if (nextProps.scaleY !== this.props.scaleY) {\n      this.scaleY(nextProps.scaleY);\n    }\n\n    if (nextProps.enable !== this.props.enable) {\n      if (nextProps.enable) {\n        this.enable();\n      } else {\n        this.disable();\n      }\n    }\n\n    for (var propKey in nextProps) {\n      if (nextProps[propKey] !== this.props[propKey] && unchangeableProps.indexOf(propKey) !== -1) {\n        throw new Error('prop: ' + propKey + ' can\\'t be change after componentDidMount');\n      }\n    }\n  };\n\n  ReactCropper.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.img) {\n      // Destroy the cropper, this makes sure events such as resize are cleaned up and do not leak\n      this.cropper.destroy();\n      delete this.img;\n      delete this.cropper;\n    }\n  };\n\n  ReactCropper.prototype.setDragMode = function setDragMode(mode) {\n    return this.cropper.setDragMode(mode);\n  };\n\n  ReactCropper.prototype.setAspectRatio = function setAspectRatio(aspectRatio) {\n    return this.cropper.setAspectRatio(aspectRatio);\n  };\n\n  ReactCropper.prototype.getCroppedCanvas = function getCroppedCanvas(options) {\n    return this.cropper.getCroppedCanvas(options);\n  };\n\n  ReactCropper.prototype.setCropBoxData = function setCropBoxData(data) {\n    return this.cropper.setCropBoxData(data);\n  };\n\n  ReactCropper.prototype.getCropBoxData = function getCropBoxData() {\n    return this.cropper.getCropBoxData();\n  };\n\n  ReactCropper.prototype.setCanvasData = function setCanvasData(data) {\n    return this.cropper.setCanvasData(data);\n  };\n\n  ReactCropper.prototype.getCanvasData = function getCanvasData() {\n    return this.cropper.getCanvasData();\n  };\n\n  ReactCropper.prototype.getImageData = function getImageData() {\n    return this.cropper.getImageData();\n  };\n\n  ReactCropper.prototype.getContainerData = function getContainerData() {\n    return this.cropper.getContainerData();\n  };\n\n  ReactCropper.prototype.setData = function setData(data) {\n    return this.cropper.setData(data);\n  };\n\n  ReactCropper.prototype.getData = function getData(rounded) {\n    return this.cropper.getData(rounded);\n  };\n\n  ReactCropper.prototype.crop = function crop() {\n    return this.cropper.crop();\n  };\n\n  ReactCropper.prototype.move = function move(offsetX, offsetY) {\n    return this.cropper.move(offsetX, offsetY);\n  };\n\n  ReactCropper.prototype.moveTo = function moveTo(x, y) {\n    return this.cropper.moveTo(x, y);\n  };\n\n  ReactCropper.prototype.zoom = function zoom(ratio) {\n    return this.cropper.zoom(ratio);\n  };\n\n  ReactCropper.prototype.zoomTo = function zoomTo(ratio) {\n    return this.cropper.zoomTo(ratio);\n  };\n\n  ReactCropper.prototype.rotate = function rotate(degree) {\n    return this.cropper.rotate(degree);\n  };\n\n  ReactCropper.prototype.rotateTo = function rotateTo(degree) {\n    return this.cropper.rotateTo(degree);\n  };\n\n  ReactCropper.prototype.enable = function enable() {\n    return this.cropper.enable();\n  };\n\n  ReactCropper.prototype.disable = function disable() {\n    return this.cropper.disable();\n  };\n\n  ReactCropper.prototype.reset = function reset() {\n    return this.cropper.reset();\n  };\n\n  ReactCropper.prototype.clear = function clear() {\n    return this.cropper.clear();\n  };\n\n  ReactCropper.prototype.replace = function replace(url, onlyColorChanged) {\n    return this.cropper.replace(url, onlyColorChanged);\n  };\n\n  ReactCropper.prototype.scale = function scale(scaleX, scaleY) {\n    return this.cropper.scale(scaleX, scaleY);\n  };\n\n  ReactCropper.prototype.scaleX = function scaleX(_scaleX) {\n    return this.cropper.scaleX(_scaleX);\n  };\n\n  ReactCropper.prototype.scaleY = function scaleY(_scaleY) {\n    return this.cropper.scaleY(_scaleY);\n  };\n\n  ReactCropper.prototype.render = function render() {\n    var _props = this.props,\n        src = _props.src,\n        alt = _props.alt,\n        crossOrigin = _props.crossOrigin;\n    var cleanProps = (0, _nextUtil.pickAttrs)(this.props);\n    return _react2['default'].createElement('div', _extends({}, cleanProps, {\n      src: null,\n      crossOrigin: null,\n      alt: null\n    }), _react2['default'].createElement('img', {\n      crossOrigin: crossOrigin,\n      ref: 'img',\n      src: src,\n      alt: alt === undefined ? 'picture' : alt,\n      style: {\n        opacity: 0\n      }\n    }));\n  };\n\n  return ReactCropper;\n}(_react.Component);\n\nReactCropper.displayName = 'ReactCropper';\nReactCropper.propTypes = {\n  // react cropper options\n  crossOrigin: _propTypes2['default'].string,\n  src: _propTypes2['default'].string,\n  alt: _propTypes2['default'].string,\n  // props of option can be changed after componentDidmount\n  aspectRatio: _propTypes2['default'].number,\n  dragMode: _propTypes2['default'].oneOf(['crop', 'move', 'none']),\n  data: _propTypes2['default'].shape({\n    x: _propTypes2['default'].number,\n    y: _propTypes2['default'].number,\n    width: _propTypes2['default'].number,\n    height: _propTypes2['default'].number,\n    rotate: _propTypes2['default'].number,\n    scaleX: _propTypes2['default'].number,\n    scaleY: _propTypes2['default'].number\n  }),\n  scaleX: _propTypes2['default'].number,\n  scaleY: _propTypes2['default'].number,\n  enable: _propTypes2['default'].bool,\n  cropBoxData: _propTypes2['default'].shape({\n    left: _propTypes2['default'].number,\n    top: _propTypes2['default'].number,\n    width: _propTypes2['default'].number,\n    hegiht: _propTypes2['default'].number\n  }),\n  canvasData: _propTypes2['default'].shape({\n    left: _propTypes2['default'].number,\n    top: _propTypes2['default'].number,\n    width: _propTypes2['default'].number,\n    hegiht: _propTypes2['default'].number\n  }),\n  zoomTo: _propTypes2['default'].number,\n  moveTo: _propTypes2['default'].arrayOf(_propTypes2['default'].number),\n  rotateTo: _propTypes2['default'].number,\n  // cropperjs options\n  // https://github.com/fengyuanchen/cropperjs#options\n  // aspectRatio, dragMode, data\n  viewMode: _propTypes2['default'].oneOf([0, 1, 2, 3]),\n  preview: _propTypes2['default'].string,\n  responsive: _propTypes2['default'].bool,\n  restore: _propTypes2['default'].bool,\n  checkCrossOrigin: _propTypes2['default'].bool,\n  checkOrientation: _propTypes2['default'].bool,\n  modal: _propTypes2['default'].bool,\n  guides: _propTypes2['default'].bool,\n  center: _propTypes2['default'].bool,\n  highlight: _propTypes2['default'].bool,\n  background: _propTypes2['default'].bool,\n  autoCrop: _propTypes2['default'].bool,\n  autoCropArea: _propTypes2['default'].number,\n  movable: _propTypes2['default'].bool,\n  rotatable: _propTypes2['default'].bool,\n  scalable: _propTypes2['default'].bool,\n  zoomable: _propTypes2['default'].bool,\n  zoomOnTouch: _propTypes2['default'].bool,\n  zoomOnWheel: _propTypes2['default'].bool,\n  wheelZoomRation: _propTypes2['default'].number,\n  cropBoxMovable: _propTypes2['default'].bool,\n  cropBoxResizable: _propTypes2['default'].bool,\n  toggleDragModeOnDblclick: _propTypes2['default'].bool,\n  minContainerWidth: _propTypes2['default'].number,\n  minContainerHeight: _propTypes2['default'].number,\n  minCanvasWidth: _propTypes2['default'].number,\n  minCanvasHeight: _propTypes2['default'].number,\n  minCropBoxWidth: _propTypes2['default'].number,\n  minCropBoxHeight: _propTypes2['default'].number,\n  build: _propTypes2['default'].func,\n  built: _propTypes2['default'].func,\n  cropstart: _propTypes2['default'].func,\n  cropmove: _propTypes2['default'].func,\n  cropend: _propTypes2['default'].func,\n  crop: _propTypes2['default'].func,\n  zoom: _propTypes2['default'].func\n};\nReactCropper.defaultProps = {\n  src: null,\n  dragMode: 'crop',\n  data: null,\n  scaleX: 1,\n  scaleY: 1,\n  enable: true,\n  zoomTo: 1,\n  rotateTo: 0\n};\nexports['default'] = ReactCropper;\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}