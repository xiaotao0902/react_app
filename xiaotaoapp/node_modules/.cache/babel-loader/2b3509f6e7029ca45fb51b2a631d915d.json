{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports['default'] = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _class, _temp;\n/* eslint-disable react/prop-types */\n\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames2 = require('classnames');\n\nvar _classnames3 = _interopRequireDefault(_classnames2);\n\nvar _nextIcon = require('../../next-icon/lib/index.js');\n\nvar _nextIcon2 = _interopRequireDefault(_nextIcon);\n\nvar _nextUtil = require('../../next-util/lib/index.js');\n\nvar _nextOverlay = require('../../next-overlay/lib/index.js');\n\nvar _nextAnimate = require('../../next-animate/lib/index.js');\n\nvar _nextAnimate2 = _interopRequireDefault(_nextAnimate);\n\nvar _container = require('./container.js');\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass);\n}\n\nvar Component = _container2['default'];\n\nvar noop = function noop() {};\n/**\n * Menu.Item\n * @order 1\n **/\n\n\nvar MenuItem = (_temp = _class = function (_Component) {\n  _inherits(MenuItem, _Component);\n\n  function MenuItem(props, context) {\n    _classCallCheck(this, MenuItem);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props, context));\n\n    ['onClick', 'onKeyDown', 'onFocus', 'onMouseEnter', 'onMouseLeave'].forEach(function (method) {\n      _this[method] = _this[method].bind(_this);\n    });\n\n    var root = _this.getRoot();\n\n    if (!root) {\n      throw new Error('MenuItem should use under Menu.');\n    }\n\n    _this.root = root;\n    _this.Menu = root.constructor;\n    _this.SubMenu = root.constructor.SubMenu;\n    return _this;\n  }\n\n  MenuItem.prototype.componentDidMount = function componentDidMount() {\n    this._meta = _extends({\n      node: _reactDom2['default'].findDOMNode(this)\n    }, this.props);\n    this.pushMetaToParent();\n  };\n\n  MenuItem.prototype.componentDidUpdate = function componentDidUpdate() {\n    // We need update parent ref to avoid root update.\n    this.root = this.getRoot();\n    this.pushMetaToParent();\n  }; // If it have a parentMenu, we push meta to the parentMenu for keyboard navigation.\n\n\n  MenuItem.prototype.pushMetaToParent = function pushMetaToParent() {\n    var menu = this.getParentByFlag('_menu')[0];\n    menu && menu.addChildMeta(this._meta);\n  };\n\n  MenuItem.prototype.componentWillUnmount = function componentWillUnmount() {\n    var menu = this.getParentByFlag('_menu')[0];\n    menu && menu.removeChildMeta(this._meta);\n  };\n\n  MenuItem.prototype.render = function render() {\n    var _classnames;\n\n    var _props = this.props,\n        focused = _props.focused,\n        selected = _props.selected,\n        disabled = _props.disabled,\n        helper = _props.helper,\n        className = _props.className,\n        indentSize = _props.indentSize,\n        children = _props.children,\n        focusedKey = _props.focusedKey,\n        hasSelectedIcon = _props.hasSelectedIcon,\n        index = _props.index,\n        needIndent = _props.needIndent,\n        _props$style = _props.style,\n        style = _props$style === undefined ? {} : _props$style,\n        others = _objectWithoutProperties(_props, ['focused', 'selected', 'disabled', 'helper', 'className', 'indentSize', 'children', 'focusedKey', 'hasSelectedIcon', 'index', 'needIndent', 'style']),\n        prefix = this.getPrefix();\n\n    if (typeof selected === 'undefined') {\n      selected = this.root.state.selectedKeys.indexOf(index) > -1;\n    }\n\n    var cls = (0, _classnames3['default'])((_classnames = {}, _defineProperty(_classnames, prefix + 'menu-item', true), _defineProperty(_classnames, 'disabled', disabled), _defineProperty(_classnames, 'selected', selected), _defineProperty(_classnames, 'focused', index && focusedKey === index), _defineProperty(_classnames, className, className), _classnames)),\n        events = {\n      onClick: this.onClick,\n      onKeyDown: this.onKeyDown,\n      onFocus: this.onFocus,\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave\n    },\n        icon = _react2['default'].createElement(_nextAnimate2['default'], {\n      animation: {\n        appear: 'zoomIn',\n        enter: 'zoomIn',\n        leave: 'zoomOut'\n      }\n    }, hasSelectedIcon && selected ? _react2['default'].createElement(_nextIcon2['default'], {\n      type: 'select',\n      className: prefix + 'menu-icon-select',\n      size: 'xs',\n      style: {\n        left: (indentSize || 20) - 16 + 'px'\n      }\n    }) : null);\n\n    helper = helper ? _react2['default'].createElement('em', {\n      className: prefix + 'menu-item-helper'\n    }, helper) : null;\n\n    if (disabled) {\n      events = {\n        // // Avoid trigger menu onSelect events\n        onSelect: function onSelect(e) {\n          e.stopPropagation();\n        },\n        onClick: function onClick(e) {\n          e.stopPropagation();\n        }\n      };\n    }\n\n    others = (0, _nextUtil.pickAttrs)(others);\n\n    if (indentSize && needIndent === true) {\n      style.paddingLeft = indentSize;\n    }\n\n    return _react2['default'].createElement('li', _extends({}, others, events, {\n      style: style,\n      tabIndex: disabled ? null : focused ? 0 : -1,\n      role: 'menuitem',\n      className: cls\n    }), children, icon, helper);\n  };\n\n  MenuItem.prototype.onClick = function onClick(e) {\n    this.root.onItemClick(e, this.props.index, 'click', this); // It will crash Popup or others component.\n    // We will adjust order of params at 2.x\n\n    this.props.onClick(this.props.index, e);\n    e.stopPropagation();\n  };\n\n  MenuItem.prototype.onKeyDown = function onKeyDown(e) {\n    var keyCode = e.keyCode;\n    this.props.onKeyDown(e);\n\n    if (keyCode === 32 || keyCode === 13) {\n      this.onClick(e);\n    }\n  };\n\n  MenuItem.prototype.onFocus = function onFocus(e) {\n    e.stopPropagation();\n  };\n\n  MenuItem.prototype.onMouseEnter = function onMouseEnter(e) {\n    this.root.onKeyNavNodeFocus(e);\n    this.root.focusChild(this._meta);\n    var parentMenu = this.getParentByType(this.Menu)[0];\n\n    if (parentMenu) {\n      var subMenu = parentMenu.getChildrenIncByType(this.SubMenu);\n      var popup = parentMenu.getChildrenIncByType(_nextOverlay.Popup);\n      subMenu.forEach(function (menu) {\n        menu.onContentMouseEnter();\n\n        if (menu.props.triggerType === 'hover') {\n          menu.onSubMenuMouseLeave(e);\n        }\n      });\n      popup.forEach(function (p) {\n        p._onContentMouseEnter();\n\n        if (p.props.triggerType === 'hover') {\n          p._onTriggerMouseLeave(e);\n        }\n      });\n    }\n\n    this.props.onMouseEnter(e);\n  };\n\n  MenuItem.prototype.onMouseLeave = function onMouseLeave(e) {\n    this.root.unFocusChild(this._meta);\n    this.props.onMouseLeave(e);\n  };\n\n  return MenuItem;\n}(Component), _class._menuItem = true, _class.propTypes = {\n  /**\n   * 样式类名的品牌前缀\n   */\n  prefix: _propTypes2['default'].string,\n\n  /**\n   * 自定义类名\n   */\n  className: _propTypes2['default'].string,\n\n  /**\n   * 自定义内联样式\n   */\n  style: _propTypes2['default'].object,\n\n  /**\n   * 显示在菜单右侧的帮助文本，通常用于一些附加信息\n   */\n  helper: _propTypes2['default'].string,\n\n  /**\n   * 禁用当前菜单项, 被禁用不会触发事件, 也无法选中Checkbox/Radio\n   */\n  disabled: _propTypes2['default'].bool,\n\n  /**\n   * 当前的菜单项是否被选中, 优先级比Menu传入的selectedKeys要高\n   */\n  selected: _propTypes2['default'].bool,\n  focused: _propTypes2['default'].bool,\n\n  /**\n   * 点击了菜单项触发的事件\n   * @param {String} key 当前菜单项的key值\n   * @param {Event} e DOM事件\n   */\n  onClick: _propTypes2['default'].func,\n  onKeyDown: _propTypes2['default'].func,\n  parent: _propTypes2['default'].any,\n\n  /**\n   * 是否显示选中图标\n   */\n  hasSelectedIcon: _propTypes2['default'].bool,\n\n  /**\n   * 是否显示缩进\n   */\n  needIndent: _propTypes2['default'].bool\n}, _class.defaultProps = {\n  helper: null,\n  disabled: false,\n  prefix: 'next-',\n  hasSelectedIcon: true,\n  needIndent: true,\n  onClick: noop,\n  onKeyDown: noop,\n  onMouseEnter: noop,\n  onMouseLeave: noop\n}, _class.contextTypes = {\n  parentIndex: _propTypes2['default'].array,\n  parentLabel: _propTypes2['default'].array,\n  prefix: _propTypes2['default'].string\n}, _temp);\nMenuItem.displayName = 'MenuItem';\nexports['default'] = MenuItem;\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}