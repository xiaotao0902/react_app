{"ast":null,"code":"import axios from 'axios';\nimport { REQUEST_ISSUES, RECEIVE_ISSUES } from '../constants/actiontype';\n\nvar requestIssues = function requestIssues() {\n  return {\n    type: REQUEST_ISSUES\n  };\n};\n\nvar receiveIssues = function receiveIssues(json) {\n  return {\n    type: RECEIVE_ISSUES,\n    posts: json\n  };\n};\n\nfunction fetchIssues() {\n  return function (dispatch) {\n    dispatch(requestIssues());\n    return axios.get('https://api.github.com/repos/axuebin/articles/issues', {\n      params: {\n        creator: 'axuebin',\n        labels: 'blog'\n      }\n    }).then(function (response) {\n      return dispatch(receiveIssues(response.data));\n    }).catch(function (e) {\n      return console.log(e);\n    });\n  };\n}\n\nfunction shouldFetchIssues(state) {\n  if (!state) {\n    return true;\n  }\n\n  return !state.items.length;\n}\n\nexport function fetchIssuesIfNeeded() {\n  return function (dispatch, getState) {\n    if (shouldFetchIssues(getState())) {\n      return dispatch(fetchIssues());\n    }\n\n    return Promise.resolve();\n  };\n}","map":{"version":3,"sources":["E:\\frontend\\xiaotaoapp\\src\\js\\actions\\index.js"],"names":["axios","REQUEST_ISSUES","RECEIVE_ISSUES","requestIssues","type","receiveIssues","json","posts","fetchIssues","dispatch","get","params","creator","labels","then","response","data","catch","e","console","log","shouldFetchIssues","state","items","length","fetchIssuesIfNeeded","getState","Promise","resolve"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,yBAA/C;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAAO;AAAEC,IAAAA,IAAI,EAAEH;AAAR,GAAP;AAAA,CAAtB;;AAEA,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,CAAAC,IAAI;AAAA,SAAK;AAAEF,IAAAA,IAAI,EAAEF,cAAR;AAAwBK,IAAAA,KAAK,EAAED;AAA/B,GAAL;AAAA,CAA1B;;AAEA,SAASE,WAAT,GAAuB;AACrB,SAAO,UAACC,QAAD,EAAc;AACnBA,IAAAA,QAAQ,CAACN,aAAa,EAAd,CAAR;AACA,WAAOH,KAAK,CAACU,GAAN,CAAU,sDAAV,EAAkE;AACvEC,MAAAA,MAAM,EAAE;AACNC,QAAAA,OAAO,EAAE,SADH;AAENC,QAAAA,MAAM,EAAE;AAFF;AAD+D,KAAlE,EAKJC,IALI,CAKC,UAAAC,QAAQ;AAAA,aAAIN,QAAQ,CAACJ,aAAa,CAACU,QAAQ,CAACC,IAAV,CAAd,CAAZ;AAAA,KALT,EAKqDC,KALrD,CAK2D,UAAAC,CAAC;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAAJ;AAAA,KAL5D,CAAP;AAMD,GARD;AASD;;AAED,SAASG,iBAAT,CAA2BC,KAA3B,EAAkC;AAChC,MAAI,CAACA,KAAL,EAAY;AACV,WAAO,IAAP;AACD;;AACD,SAAO,CAACA,KAAK,CAACC,KAAN,CAAYC,MAApB;AACD;;AAED,OAAO,SAASC,mBAAT,GAA+B;AACpC,SAAO,UAAChB,QAAD,EAAWiB,QAAX,EAAwB;AAC7B,QAAIL,iBAAiB,CAACK,QAAQ,EAAT,CAArB,EAAmC;AACjC,aAAOjB,QAAQ,CAACD,WAAW,EAAZ,CAAf;AACD;;AACD,WAAOmB,OAAO,CAACC,OAAR,EAAP;AACD,GALD;AAMD","sourcesContent":["import axios from 'axios';\nimport { REQUEST_ISSUES, RECEIVE_ISSUES } from '../constants/actiontype';\n\nconst requestIssues = () => ({ type: REQUEST_ISSUES });\n\nconst receiveIssues = json => ({ type: RECEIVE_ISSUES, posts: json });\n\nfunction fetchIssues() {\n  return (dispatch) => {\n    dispatch(requestIssues());\n    return axios.get('https://api.github.com/repos/axuebin/articles/issues', {\n      params: {\n        creator: 'axuebin',\n        labels: 'blog',\n      },\n    }).then(response => dispatch(receiveIssues(response.data))).catch(e => console.log(e));\n  };\n}\n\nfunction shouldFetchIssues(state) {\n  if (!state) {\n    return true;\n  }\n  return !state.items.length;\n}\n\nexport function fetchIssuesIfNeeded() {\n  return (dispatch, getState) => {\n    if (shouldFetchIssues(getState())) {\n      return dispatch(fetchIssues());\n    }\n    return Promise.resolve();\n  };\n}\n"]},"metadata":{},"sourceType":"module"}